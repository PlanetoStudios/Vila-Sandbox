<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">

  <!-- PWA / MOBILE -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#222222">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Vila Sandbox">

  <!-- MANIFEST -->
  <link rel="manifest" href="./manifest.json">

  <!-- IOS ICON -->
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

  <title>Sandbox Humanos vs Monstros</title>

  <style>
    * {
      box-sizing: border-box;
    }

    /* Try to load a display font (fallbacks included); if Boombox isn't available, a bold display look is used */
    @import url('https://fonts.googleapis.com/css2?family=Righteous&display=swap');

    body {
      margin: 0;
      background: #222;
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden; /* sem rolagem */

      /* PWA TOUCH SAFETY */
      overscroll-behavior: none;
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
    }

    #ui {
      background: #333;
      padding: 8px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }

    button {
      padding: 6px 10px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background: #555;
      color: #fff;
      font-size: 14px;
    }

    button:active {
      transform: scale(0.96);
      background: #777;
    }

    canvas {
      display: block;
      background: #111;
      width: 100vw;
      height: calc(100vh - 56px); /* ocupa o resto da tela */
      touch-action: none;
    }

    /* START SCREEN */
    #startScreen {
      position: absolute;
      left: 0;
      top: 56px; /* below top UI bar */
      width: 100vw;
      height: calc(100vh - 56px);
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
      z-index: 40;
    }

    #startCard {
      width: min(860px, 92vw);
      max-width: 920px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.12));
      border-radius: 14px;
      padding: 28px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
      text-align: center;
      color: #fff;
    }

    #title {
      font-family: 'Righteous', 'Segoe UI', Arial, sans-serif;
      font-size: 48px;
      letter-spacing: 1.5px;
      margin: 6px 0 18px 0;
      color: #fff;
      text-transform: none;
      text-shadow:
        0 2px 0 rgba(0,0,0,0.7),
        0 6px 18px rgba(255, 140, 0, 0.14),
        0 0 26px rgba(255, 160, 40, 0.12),
        0 0 8px rgba(255, 200, 80, 0.06);
    }

    #subtitle {
      font-size: 14px;
      color: rgba(255,255,255,0.8);
      margin-bottom: 18px;
    }

    .startButtons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .startBtn {
      min-width: 120px;
      padding: 12px 18px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }

    .playBtn {
      background: linear-gradient(90deg,#ff8a00,#ff5e62);
      color: white;
      box-shadow: 0 6px 18px rgba(255,90,60,0.18), inset 0 -2px 0 rgba(0,0,0,0.12);
    }

    .settingsBtn {
      background: #2f2f3a;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.04);
    }

    #settingsPanel {
      margin-top: 14px;
      display: none;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    .toggleSwitch {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .smallNote {
      font-size: 12px;
      color: rgba(255,255,255,0.72);
      margin-top: 8px;
    }

    .dimmed {
      opacity: 0.9;
      transition: opacity 220ms;
    }
  </style>
</head>

<body>
  <div id="ui">
    <button data-mode="human">ğŸ‘¤ Humano</button>
    <button data-mode="monster">ğŸ‘¹ Monstro</button>
    <button data-mode="wood">ğŸŒ² Madeira</button>
    <button data-mode="stone">ğŸª¨ Pedra</button>
    <button data-mode="iron">â›“ Ferro</button>
    <button data-mode="gold">ğŸ¥‡ Ouro</button>
    <button data-mode="diamond">ğŸ’ Diamante</button>
    <button data-mode="ruby">ğŸ”´ Rubi</button>
    <button data-mode="copper">ğŸŸ  Cobre</button>
    <button data-mode="lapis">ğŸ”· LÃ¡pis Lazuli</button>
    <button data-mode="sapphire">ğŸ”¹ Safira</button>
    <button data-mode="netherite">â¬› Netherite</button>
    <button data-mode="gef">ğŸ§  GEF</button>
    <button data-mode="rhino">ğŸ¦ Rinoceronte</button>
    <button data-mode="alien">ğŸ‘½ Alien</button>
    <button data-mode="golem">ğŸ›¡ï¸ Golem de Ferro</button>

    <!-- new ores -->
    <button data-mode="topaz">ğŸ”¶ TopÃ¡zio</button>
    <button data-mode="esmeralda">ğŸ’š Esmeralda</button>
    <button data-mode="ametista">ğŸ”® Ametista</button>
    <button data-mode="peridote">ğŸŸ¢ Peridoto</button>
    <button data-mode="aco">âš™ï¸ AÃ§o</button>
    <button data-mode="aquamarino">ğŸ©µ Aquamarino</button>
    <button data-mode="platina">âšª Platina</button>

    <!-- world selector -->
    <div id="worldSelector" style="display:flex; gap:6px; align-items:center; margin-left:6px;">
      <button data-world="earth" style="background:#2e7d32;">ğŸŒ Terra</button>
      <button data-world="mars" style="background:#c1440e;">ğŸ”´ Marte</button>
      <button data-world="moon" style="background:#9e9e9e; color:#111;">ğŸŒ• Lua</button>
    </div>

    <button id="pauseBtn" style="margin-left:4px;">â¸ï¸</button>
    <button id="resetBtn" style="margin-left:4px;background:#b71c1c;">â†º Reset</button>
    <button class="speedBtn" data-speed="1">1x</button>
    <button class="speedBtn" data-speed="2">2x</button>
    <button class="speedBtn" data-speed="4">4x</button>

    <span id="yokoDisplay" style="margin-left:8px;font-size:14px;color:#ffeb3b;">Yoko: 0</span>
  </div>

  <div id="startScreen" aria-hidden="false">
    <div id="startCard" role="dialog" aria-label="Tela inicial">
      <div id="title">Vila Sandbox</div>
      <div id="subtitle">Uma vila interativa â€” clique em Jogar para comeÃ§ar</div>

      <div class="startButtons">
        <button id="playBtn" class="startBtn playBtn">Jogar â–¶</button>
        <button id="settingsBtn" class="startBtn settingsBtn">ConfiguraÃ§Ãµes âš™ï¸</button>
      </div>

      <div id="settingsPanel">
        <label class="toggleSwitch">
          <input id="musicToggle" type="checkbox" checked />
          MÃºsica de fundo
        </label>
      </div>

      <div class="smallNote">
        Dica: use os botÃµes na barra superior para spawnar unidades e mudar o mundo.
      </div>
    </div>
  </div>

  <canvas id="game"></canvas>

  <!-- background music (controls from main.js) -->
  <audio id="bgMusic" loop src=""></audio>

  <!-- SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js");
      });
    }
  </script>

  <script type="module" src="./main.js"></script>
</body>
</html>
